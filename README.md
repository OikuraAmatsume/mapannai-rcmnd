# ğŸ—ºï¸ AI æ¨èç”Ÿæˆ API

åŸºäº AWS Lambda çš„å¼‚æ­¥æ¨èç”ŸæˆæœåŠ¡ï¼Œä½¿ç”¨ Google Places API å’Œ Gemini AI ä¸ºç”¨æˆ·ç”Ÿæˆå‘¨è¾¹æ™¯ç‚¹ã€ç¾é£Ÿã€æ´»åŠ¨æ¨èã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **ä¸‰ç§æ¨èç±»å‹**ï¼šç¾é£Ÿ / åèƒœå¤è¿¹å’Œæ—…æ¸¸æ™¯ç‚¹ / è·³èš¤å¸‚åœºæˆ–æ´»åŠ¨
- **AI é©±åŠ¨**ï¼šä½¿ç”¨ Gemini AI ç”Ÿæˆä¸ªæ€§åŒ–ä¸­æ–‡æ¨èæ¦‚è¿°
- **å¼‚æ­¥æ¶æ„**ï¼šæ”¯æŒé•¿æ—¶é—´è¿è¡Œä»»åŠ¡ï¼Œé¿å… API Gateway è¶…æ—¶
- **æ— æ•°æ®åº“è®¾è®¡**ï¼šä½¿ç”¨ S3 å­˜å‚¨ä¸´æ—¶ç»“æœï¼Œé™ä½æˆæœ¬

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lambda A   â”‚â”€â”€â”€â”€â–¶â”‚  Lambda B   â”‚â”€â”€â”€â”€â–¶â”‚     S3      â”‚
â”‚  (å¯åŠ¨å™¨)    â”‚     â”‚  (æ‰§è¡Œå™¨)    â”‚     â”‚  (ç»“æœå­˜å‚¨)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                       â”‚
       â”‚  è½®è¯¢æŸ¥è¯¢    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Lambda C   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚  (æŸ¥è¯¢å™¨)    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ recommendation_generator.py  # æ ¸å¿ƒæ¨èé€»è¾‘
â”œâ”€â”€ config.py                    # é…ç½®ç®¡ç†
â”œâ”€â”€ lambda_a_starter.py          # Lambda A - å¯åŠ¨å™¨
â”œâ”€â”€ lambda_b_executor.py         # Lambda B - æ‰§è¡Œå™¨
â”œâ”€â”€ lambda_c_checker.py          # Lambda C - æŸ¥è¯¢å™¨
â”œâ”€â”€ lambda_function.py           # Lambda å…¥å£
â””â”€â”€ requirements.txt             # Python ä¾èµ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ |
|--------|------|
| `GOOGLE_PLACES_API_KEY` | Google Places API å¯†é’¥ |
| `GEMINI_API_KEY` | Google Gemini API å¯†é’¥ |
| `S3_BUCKET_NAME` | S3 å­˜å‚¨æ¡¶åç§° |
| `S3_REGION` | S3 åŒºåŸŸ (å¦‚ ap-northeast-1) |
| `LAMBDA_B_FUNCTION_NAME` | Lambda B å‡½æ•°å (Lambda A éœ€è¦) |

### 3. éƒ¨ç½²åˆ° AWS Lambda

**Lambda A (å¯åŠ¨å™¨)**
- è¿è¡Œæ—¶ï¼šPython 3.11
- å¤„ç†ç¨‹åºï¼š`lambda_function.lambda_handler`
- è¶…æ—¶ï¼š10 ç§’

**Lambda B (æ‰§è¡Œå™¨)**
- è¿è¡Œæ—¶ï¼šPython 3.11
- å¤„ç†ç¨‹åºï¼š`lambda_function.lambda_handler`
- è¶…æ—¶ï¼š5 åˆ†é’Ÿ
- å†…å­˜ï¼š256 MB+

**Lambda C (æŸ¥è¯¢å™¨)**
- è¿è¡Œæ—¶ï¼šPython 3.11
- å¤„ç†ç¨‹åºï¼š`lambda_function.lambda_handler`
- è¶…æ—¶ï¼š10 ç§’

## ğŸ“¡ API ä½¿ç”¨

### å¯åŠ¨æ¨èä»»åŠ¡

```bash
POST /recommendation
Content-Type: application/json

{
  "lat": 35.4437,
  "lng": 139.6380,
  "main_type": "ç¾é£Ÿ",
  "sub_type": "æ‹‰é¢",
  "budget": 2000
}
```

**å“åº”ï¼š**
```json
{
  "message": "Recommendation generation started",
  "jobId": "job_abc123",
  "statusCheckUrl": "/status/job_abc123"
}
```

### æŸ¥è¯¢ç»“æœ

```bash
GET /status/{jobId}
```

**å“åº”ï¼ˆå¤„ç†ä¸­ï¼‰ï¼š**
```json
{
  "status": "processing",
  "message": "ä»»åŠ¡æ­£åœ¨å¤„ç†ä¸­"
}
```

**å“åº”ï¼ˆå®Œæˆï¼‰ï¼š**
```json
{
  "status": "completed",
  "result": { ... }
}
```

## ğŸ”§ æ”¯æŒçš„æ¨èç±»å‹

| ç±»å‹ | å­ç±»å‹ | è¯´æ˜ |
|------|--------|------|
| ç¾é£Ÿ | æ‹‰é¢ã€å¯¿å¸ã€çƒ§è‚‰ç­‰ | åŸºäºè¯„è®ºç”Ÿæˆ 100 å­—æ¦‚è¿° |
| åèƒœå¤è¿¹å’Œæ—…æ¸¸æ™¯ç‚¹ | - | Gemini æœç´¢ + 200 å­—å†å²æ¦‚è¿° |
| è·³èš¤å¸‚åœºæˆ–æ´»åŠ¨ | - | æœªæ¥ 30 å¤©å†…çš„æ´»åŠ¨ï¼Œå«æ—¶é—´å’Œç½‘ç«™ |

## ğŸ¤– AI æŠ€æœ¯

- **Prompt Engineering**ï¼šè§’è‰²è®¾å®šã€ç»“æ„åŒ–è¾“å‡ºã€å­—æ•°çº¦æŸ
- **ç±» RAG æ¨¡å¼**ï¼šæ£€ç´¢è¯„è®ºæ•°æ® â†’ Gemini ç”Ÿæˆæ¦‚è¿°
- **Structured Output**ï¼šJSON Schema çº¦æŸè¾“å‡ºæ ¼å¼

